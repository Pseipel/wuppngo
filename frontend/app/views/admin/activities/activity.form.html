<div class="edit-container">
	<mat-card class="activity-edit-card" *ngIf="activity">
		<form #activityForm="ngForm" (ngSubmit)="onSubmit()" class="well">
			<mat-card-header>
				<h2>{{ activity.name }}</h2>
			</mat-card-header>

			<mat-form-field class="edit-form-full-width">
				<input matInput type=text [(ngModel)]="activity.name" placeholder={{constants.name}} name="name" value={{activity.name}}
				 required [errorStateMatcher]="validation" id="activity_name_field">
			</mat-form-field>

			<mat-form-field class="edit-form-full-width">
				<textarea matInput type=text [(ngModel)]="activity.description" placeholder="{{constants.description}}" name="description"
				 value={{activity.description}} id="activity_description_field"></textarea>
			</mat-form-field>

			Aktivität findet im {{activity.schedule.recurrence.weekly_period}} wöchentlicher Rythmus statt.
			<div *ngFor="let entry of activity.schedule.recurrence.week_days">{{entry.name}}</div>

			<h2 class="edit-form-three-column-width">{{constants.tags}}</h2>
			<mat-form-field class="edit-form-full-width">
				<input matInput type=text [formControl]="tagsCtrl" placeholder="{{constants.tags}}" name="tags" id="activity_tags">
			</mat-form-field>

			<mat-form-field>
				<mat-select placeholder={{constants.targetGroups}} [formControl]="targetGroupCtrl" multiple>
					<mat-option *ngFor="let targetGroup of targetGroups" [value]="targetGroup.id">{{targetGroup.name}}</mat-option>
				</mat-select>
			</mat-form-field>

			<mat-card class="address-card">
				<mat-form-field class="edit-form-full-width">
					<input matInput name="address" placeholder={{constants.address}} [matAutocomplete]="auto" [formControl]="addressCtrl">
					<mat-autocomplete #auto="matAutocomplete" [displayWith]="toString">
						<mat-option *ngFor="let address of filteredAddresses | async" [value]="address">
							{{ toString(address) }}
						</mat-option>
					</mat-autocomplete>
				</mat-form-field>
			</mat-card>

			<button mat-raised-button type="submit">{{constants.save}}</button>
		</form>
		<button mat-raised-button (click)="back()">{{constants.back}}</button>
	</mat-card>
</div>
