<div class="edit-container" *ngIf="organisation">
	<mat-card class="organisation-edit-card">
		<form #organisationForm="ngForm" (ngSubmit)="onSubmit()" class="well">
			<mat-horizontal-stepper [linear]="isLinear">
				<mat-step [stepControl]="stepperFormGroup">
					<ng-template matStepLabel>{{constants.coreData}}</ng-template>
					<mat-form-field class="edit-form-full-width">
						<input matInput type=text [(ngModel)]="organisation.name" placeholder={{constants.nameString}} name="name" value={{organisation.name}}
						 required [errorStateMatcher]="validation" id="orga_name_field">
					</mat-form-field>
					<mat-form-field class="edit-form-full-width">
						<textarea matInput type=text [(ngModel)]="organisation.description" placeholder={{constants.description}} name="description"
						 value={{organisation.description}} id="orga_description_field"></textarea>
					</mat-form-field>
					<mat-form-field class="edit-form-full-width">
						<input matInput type="email" [(ngModel)]="organisation.mail" placeholder={{constants.mail}} name="mail" value={{organisation.mail}}
						 id="orga_mail_field" email="true">
					</mat-form-field>
					<mat-form-field class="edit-form-full-width">
						<input matInput type=text [(ngModel)]="organisation.phone" placeholder={{constants.phone}} name="telephone" value={{organisation.phone}}
						 id="orga_phone_field">
					</mat-form-field>
					<mat-form-field class="edit-form-full-width">
						<input matInput type=text [(ngModel)]="organisation.website" placeholder={{constants.website}} name="website" id="orga_website_field"
						 value={{organisation.website}}>
					</mat-form-field>
					<div>
						<button type="button" mat-raised-button color="primary" matStepperNext>{{constants.next}}</button>
					</div>
				</mat-step>
				<mat-step [stepControl]="stepperFormGroup">
					<ng-template matStepLabel>{{constants.address}}</ng-template>
					<mat-card class="address-card" *ngIf="organisation.address">
						<address-autocomplete-form #addressAutocompleteComponent [address]="organisation.address" (changedAddress)="addressChanged($event)"></address-autocomplete-form>
					</mat-card>
					<div>
						<button type="button" mat-raised-button matStepperPrevious>{{constants.previous}}</button>
						<button type="button" mat-raised-button color="primary" (click)="addressSubmit()" matStepperNext>{{constants.next}}</button>
					</div>
				</mat-step>
				<mat-step [stepControl]="stepperFormGroup">
					<ng-template matStepLabel>{{constants.users}}</ng-template>
					<edit-users #usersTable [organisation]="organisation" (approvedAsAdmin)="approvedAsAdmin($event)"></edit-users>
					<div>
						<button type="button" mat-raised-button matStepperPrevious>{{constants.previous}}</button>
						<button type="button" mat-raised-button color="primary" (click)="prepareSubmit()" matStepperNext>{{constants.next}}</button>
					</div>
				</mat-step>

				<mat-step [stepControl]="stepperFormGroup">
					<ng-template matStepLabel>{{constants.summary}}</ng-template>
					<h2>{{constants.pleaseControl}}</h2>
					<organisation-detail *ngIf="organisation && organisation.address" [organisation]="organisation"></organisation-detail>
					<button type="button" mat-raised-button matStepperPrevious>{{constants.previous}}</button>
					<button mat-raised-button color="primary" type="submit" [disabled]="organisationForm.invalid">{{constants.save}}</button>
				</mat-step>
			</mat-horizontal-stepper>
			<button type="button" mat-raised-button (click)="back()">{{constants.cancel}}</button>
		</form>
	</mat-card>
</div>
