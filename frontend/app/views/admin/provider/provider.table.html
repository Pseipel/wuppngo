<div class="filter">
	<mat-form-field>
		<input matInput (keyup)="handleFiltered($event)"
		  placeholder="Filter">
	</mat-form-field>
</div>

<mat-table #table [dataSource]="dataSource"
  class="example-table" matSort (matSortChange)="handleSorted($event)">

	<!-- username Column -->
	<ng-container matColumnDef="username">
		<mat-header-cell *matHeaderCellDef
		  mat-sort-header>{{constants.user}}</mat-header-cell>
		<mat-cell *matCellDef="let row">{{ row.user.username }}</mat-cell>
	</ng-container>

	<!-- fullname Column -->
	<ng-container matColumnDef="fullname">
		<mat-header-cell *matHeaderCellDef
		  mat-sort-header>{{constants.nameString}}</mat-header-cell>
		<mat-cell *matCellDef="let row">{{ row.user.fullname }}</mat-cell>
	</ng-container>

	<!-- phone Column -->
	<ng-container matColumnDef="phone">
		<mat-header-cell *matHeaderCellDef
		  mat-sort-header>{{constants.phone}}</mat-header-cell>
		<mat-cell *matCellDef="let row">{{ row.user.phone }}</mat-cell>
	</ng-container>

	<!-- admin flag Column -->
	<ng-container matColumnDef="admin">
		<mat-header-cell *matHeaderCellDef
		  mat-sort-header>{{constants.admin}}</mat-header-cell>
		<mat-cell *matCellDef="let row">
			<mat-checkbox [disabled]="!row.approved"
			  [(ngModel)]="row.admin">
			</mat-checkbox>
		</mat-cell>
	</ng-container>

	<!-- approval flag Column -->
	<ng-container matColumnDef="approved">
		<mat-header-cell *matHeaderCellDef
		  mat-sort-header>{{constants.approved}}</mat-header-cell>
		<mat-cell *matCellDef="let row">
			<mat-checkbox [(ngModel)]="row.approved">
			</mat-checkbox>
		</mat-cell>
	</ng-container>

	<!-- completely remove from provider table  -->
	<ng-container matColumnDef="delete">
		<mat-header-cell *matHeaderCellDef>
			{{constants.deleteFromOrganisation}}
		</mat-header-cell>
		<mat-cell *matCellDef="let row">
			<delete-action [recordID]="row.id"
			  [nameToDelete]="row.user.username"
			  (onDelete)="onDelete($event)">
			</delete-action>
		</mat-cell>
	</ng-container>

	<mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
	<mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
</mat-table>

<mat-paginator [pageSize]="constants.pageSize"
  [pageSizeOptions]="constants.pageSizeOptions"
  (page)="handlePageChanged($event)">
</mat-paginator>
<button type="button" mat-raised-button
  color="primary" (click)="save()">{{constants.save}}
</button>
