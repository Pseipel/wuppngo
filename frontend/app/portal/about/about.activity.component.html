<ng-template #header>
	<slot i18n="@@aboutActivity">Aktivitäts-Details</slot>
</ng-template>

<mat-list>
	<mat-list-item>
		<h3>{{ item.name }}</h3>
	</mat-list-item>

	<mat-list-item>
		<p class="hyphenate">{{ item.description }}</p>
	</mat-list-item>

	<mat-divider></mat-divider>

	<h4 mat-subheader>
		<slot i18n="@@general">Allgemein</slot>
	</h4>

	<mat-list-item>
		<fa-icon mat-list-icon icon="map-marker-alt"></fa-icon>
		<div class="mat-list-text">
			<p mat-line>
				{{ item.address.street }}
				{{ item.address.house_number }}
			</p>
			<p mat-line>
				{{ item.address.postal_code }}
				{{ item.address.place }}
				{{ item.address.suburb?.name }}
			</p>
		</div>
	</mat-list-item>

	<a mat-button color="primary" tabindex="-1"
		(click)="viewSchedules = !viewSchedules">
		<mat-list-item>
			<fa-icon mat-list-icon icon="calendar-alt"></fa-icon>
			<div class="mat-list-text">
				<ng-container *ngIf="viewSchedules">
					<strong mat-line>
						<slot i18n="@@schedules">Alle Termine</slot>
					</strong>
					<ng-container *ngFor="let i of item.schedules">
						<p mat-line>
							{{ i.start_date | date:'dd.MM.yyyy, HH:mm' }}
							&ndash;
							{{ i.end_date | date:'dd.MM.yyyy, HH:mm' }}
						</p>
					</ng-container>
				</ng-container>

				<ng-container *ngIf="!viewSchedules">
					<strong mat-line>
						<slot i18n="@@schedule">Nächster Termin</slot>
					</strong>
					<p mat-line>
						{{ item.schedules[0].start_date | date:'dd.MM.yyyy, HH:mm' }}
						&ndash;
						{{ item.schedules[0].end_date | date:'dd.MM.yyyy, HH:mm' }}
					</p>
				</ng-container>
			</div>
		</mat-list-item>
	</a>

	<mat-divider></mat-divider>

	<h4 mat-subheader>
		<slot i18n="@@classification">Einordnung</slot>
	</h4>

	<mat-list-item>
		<fa-icon mat-list-icon icon="bookmark" [style.fill]="item.category.color">
		</fa-icon>
		<div class="mat-list-text">
			<strong mat-line>
				<slot i18n="@@category">Kategorie</slot>
			</strong>
			<p mat-line>{{ item.category.name }}</p>
		</div>
	</mat-list-item>

	<a mat-button color="primary" tabindex="-1"
		[routerLink]="['/organisation', item.provider.organisation.id]">
		<mat-list-item>
			<fa-icon mat-list-icon icon="home"></fa-icon>
			<div class="mat-list-text">
				<strong mat-line>
					<slot i18n="@@organisation">Organisation</slot>
				</strong>
				<p mat-line>{{ item.provider.organisation.name }}</p>
			</div>
		</mat-list-item>
	</a>

	<ng-container *ngIf="!!item.target_groups.length">
		<mat-list-item>
			<fa-icon mat-list-icon icon="chart-pie"></fa-icon>
			<div class="mat-list-text">
				<strong mat-line>
					<slot i18n="@@targetGroups">Zielgruppen</slot>
				</strong>
				<p mat-line>
					<ng-container *ngFor="let i of item.target_groups">
						<span class="comma">{{ i.name }}</span>
					</ng-container>
				</p>
			</div>
		</mat-list-item>
	</ng-container>

	<ng-container *ngIf="!!item.tags.length">
		<mat-list-item>
			<fa-icon mat-list-icon icon="tags"></fa-icon>
			<div class="mat-list-text">
				<strong mat-line>
					<slot i18n="@@tags">Tags</slot>
				</strong>
				<p mat-line>
					<ng-container *ngFor="let i of item.tags">
						<span class="comma">{{ i.name }}</span>
					</ng-container>
				</p>
			</div>
		</mat-list-item>
	</ng-container>

	<ng-container *ngIf="item.show_user">
		<mat-divider></mat-divider>

		<h4 mat-subheader>
			<slot i18n="@@person">Person</slot>
		</h4>

		<mat-list-item>
			<fa-icon mat-list-icon icon="user"></fa-icon>
			<div class="mat-list-text">
				<strong mat-line>{{ item.provider.user.fullname }}</strong>
				<p mat-line>
					<slot i18n="@@created">Aktiv seit</slot>
					{{ item.provider.user.created | date:'dd.MM.yyyy' }}
				</p>
			</div>
		</mat-list-item>

		<a mat-button color="primary" tabindex="-1"
			[href]="'mailto:' + item.provider.user.username">
			<mat-list-item>
				<fa-icon mat-list-icon icon="envelope"></fa-icon>
				<div class="mat-list-text">
					<strong mat-line>
						<slot i18n="@@contactMail">E-Mail-Kontakt</slot>
					</strong>
					<p mat-line>{{ item.provider.user.username }}</p>
				</div>
			</mat-list-item>
		</a>

		<ng-container *ngIf="item.provider.user.phone">
			<a mat-button color="primary" tabindex="-1"
				[href]="'tel:' + item.provider.user.phone">
				<mat-list-item>
					<fa-icon mat-list-icon icon="phone"></fa-icon>
					<div class="mat-list-text">
						<strong mat-line>
							<slot i18n="@@contactPhone">Telefon-Kontakt</slot>
						</strong>
						<p mat-line>{{ item.provider.user.phone }}</p>
					</div>
				</mat-list-item>
			</a>
		</ng-container>
	</ng-container>
</mat-list>
